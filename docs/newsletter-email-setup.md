# –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Email –¥–ª—è —Ä–∞—Å—Å—ã–ª–∫–∏

## üìß –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Gmail –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ email

### –®–∞–≥ 1: –°–æ–∑–¥–∞–Ω–∏–µ App Password –≤ Gmail

1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ Google Account: https://myaccount.google.com/
2. –û—Ç–∫—Ä–æ–π—Ç–µ —Ä–∞–∑–¥–µ–ª "–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å"
3. –í–∫–ª—é—á–∏—Ç–µ 2-Step Verification (–µ—Å–ª–∏ –Ω–µ –≤–∫–ª—é—á–µ–Ω)
4. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ "App passwords" (–ü–∞—Ä–æ–ª–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π)
5. –í—ã–±–µ—Ä–∏—Ç–µ "Mail" –∏ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ
6. –°–æ–∑–¥–∞–π—Ç–µ –ø–∞—Ä–æ–ª—å - —Å–∫–æ–ø–∏—Ä—É–π—Ç–µ –µ–≥–æ (16 —Å–∏–º–≤–æ–ª–æ–≤)

### –®–∞–≥ 2: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è

–î–æ–±–∞–≤—å—Ç–µ –≤ `.env.local`:

```bash
# Email configuration
EMAIL_USER=eurocoinfinance@gmail.com
EMAIL_PASSWORD=your_app_password_here

# Newsletter auth
NEWSLETTER_AUTH_TOKEN=your_secure_random_token_here
```

### –®–∞–≥ 3: –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã

–ü–æ—Å–ª–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏, –ø—Ä–æ–≤–µ—Ä—å—Ç–µ –æ—Ç–ø—Ä–∞–≤–∫—É email:

```bash
curl -X POST http://localhost:3000/api/newsletter/send-code \
  -H "Content-Type: application/json" \
  -d '{"email":"test@example.com"}'
```

## üîê –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

- ‚úÖ –ù–µ —Ö—Ä–∞–Ω–∏—Ç–µ –ø–∞—Ä–æ–ª–∏ –≤ –∫–æ–¥–µ - –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
- ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ App Password, –∞ –Ω–µ –æ—Å–Ω–æ–≤–Ω–æ–π –ø–∞—Ä–æ–ª—å Gmail
- ‚úÖ –•—Ä–∞–Ω–∏—Ç–µ `.env.local` –≤ `.gitignore`
- ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ç–æ–∫–µ–Ω –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ –¥–ª—è API

## üì§ Workflow

### –î–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π:

1. –ù–∞–∂–∞—Ç—å –∫–Ω–æ–ø–∫—É "–†–∞—Å—Å—ã–ª–∫–∞" –Ω–∞ —Å–∞–π—Ç–µ
2. –í–≤–µ—Å—Ç–∏ email –≤ –º–æ–¥–∞–ª—å–Ω–æ–º –æ–∫–Ω–µ
3. –ü–æ–ª—É—á–∏—Ç—å –∫–æ–¥ –Ω–∞ email
4. –í–≤–µ—Å—Ç–∏ 6-–∑–Ω–∞—á–Ω—ã–π –∫–æ–¥
5. –ü–æ–¥–ø–∏—Å–∫–∞ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∞ ‚úÖ

### –î–ª—è –∞–¥–º–∏–Ω–∞:

1. –û—Ç–∫—Ä—ã—Ç—å Telegram-–±–æ—Ç
2. –ù–∞–ø–∏—Å–∞—Ç—å `/newsletter`
3. –£–≤–∏–¥–µ—Ç—å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ–¥–ø–∏—Å—á–∏–∫–æ–≤
4. –ù–∞–ø–∏—Å–∞—Ç—å —Ç–µ–∫—Å—Ç —Ä–∞—Å—Å—ã–ª–∫–∏
5. –û—Ç–ø—Ä–∞–≤–∏—Ç—å —Ä–∞—Å—Å—ã–ª–∫—É –Ω–∞ –≤—Å–µ email –ø–æ–¥–ø–∏—Å—á–∏–∫–æ–≤

## üóÑÔ∏è –°—Ö–µ–º–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

### –¢–∞–±–ª–∏—Ü–∞: newsletter_subscribers

```sql
email VARCHAR(255) - Email –ø–æ–¥–ø–∏—Å—á–∏–∫–∞ (—É–Ω–∏–∫–∞–ª—å–Ω—ã–π)
chat_id VARCHAR(255) - ID –≤ Telegram (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
verified BOOLEAN - –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω –ª–∏ email
verification_code VARCHAR(6) - –ö–æ–¥ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è
code_expires_at TIMESTAMP - –°—Ä–æ–∫ –¥–µ–π—Å—Ç–≤–∏—è –∫–æ–¥–∞
is_active BOOLEAN - –ê–∫—Ç–∏–≤–Ω–∞ –ª–∏ –ø–æ–¥–ø–∏—Å–∫–∞
language VARCHAR(10) - –Ø–∑—ã–∫ (ru/en)
```

## üìä API Endpoints

### POST /api/newsletter/send-code

–û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –∫–æ–¥ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è –Ω–∞ email

**Request:**

```json
{
  "email": "user@example.com"
}
```

**Response:**

```json
{
  "success": true
}
```

### POST /api/newsletter/verify-code

–ü—Ä–æ–≤–µ—Ä—è–µ—Ç –∫–æ–¥ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è

**Request:**

```json
{
  "email": "user@example.com",
  "code": "123456"
}
```

**Response:**

```json
{
  "success": true,
  "verified": true
}
```

### POST /api/newsletter/send-email

–û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Ä–∞—Å—Å—ã–ª–∫—É –Ω–∞ –≤—Å–µ email (–¥–ª—è –∞–¥–º–∏–Ω–∞)

**Request:**

```json
{
  "message": "–¢–µ–∫—Å—Ç —Ä–∞—Å—Å—ã–ª–∫–∏",
  "authToken": "your_token"
}
```

**Response:**

```json
{
  "success": true,
  "total": 150,
  "sent": 145,
  "failed": 5
}
```

## ü§ñ Telegram –∫–æ–º–∞–Ω–¥—ã –¥–ª—è –∞–¥–º–∏–Ω–∞

- `/newsletter` - –Ω–∞—á–∞—Ç—å –ø—Ä–æ—Ü–µ—Å—Å –æ—Ç–ø—Ä–∞–≤–∫–∏ —Ä–∞—Å—Å—ã–ª–∫–∏
- –ü–æ—Å–ª–µ –∫–æ–º–∞–Ω–¥—ã –æ—Ç–ø—Ä–∞–≤–∏—Ç—å —Ç–µ–∫—Å—Ç —Ä–∞—Å—Å—ã–ª–∫–∏ –æ–±—ã—á–Ω—ã–º —Å–æ–æ–±—â–µ–Ω–∏–µ–º
- –ë–æ—Ç –æ—Ç–ø—Ä–∞–≤–∏—Ç —Ä–∞—Å—Å—ã–ª–∫—É –Ω–∞ –≤—Å–µ email –ø–æ–¥–ø–∏—Å—á–∏–∫–æ–≤

## ‚öôÔ∏è –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### –ü–æ–ª–Ω—ã–π workflow:

**–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å:**

1. –ó–∞—Ö–æ–¥–∏—Ç –Ω–∞ —Å–∞–π—Ç
2. –õ–∏—Å—Ç–∞–µ—Ç –≤–Ω–∏–∑ –∫ —Å–µ–∫—Ü–∏–∏ "–ö–æ–Ω—Ç–∞–∫—Ç –∏ –Ω–∞—á–∞–ª–æ –ø—Ä–æ—Ü–µ–¥—É—Ä—ã"
3. –ù–∞–∂–∏–º–∞–µ—Ç "–†–∞—Å—Å—ã–ª–∫–∞"
4. –í–≤–æ–¥–∏—Ç email –≤ –º–æ–¥–∞–ª—å–Ω–æ–º –æ–∫–Ω–µ
5. –ü–æ–ª—É—á–∞–µ—Ç –∫–æ–¥ –Ω–∞ –ø–æ—á—Ç—É
6. –í–≤–æ–¥–∏—Ç –∫–æ–¥ –∏ –ø–æ–¥–ø–∏—Å—ã–≤–∞–µ—Ç—Å—è

**–ê–¥–º–∏–Ω:**

1. –û—Ç–∫—Ä—ã–≤–∞–µ—Ç Telegram-–±–æ—Ç
2. –ü–∏—à–µ—Ç `/newsletter`
3. –ü–æ–ª—É—á–∞–µ—Ç –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ–¥–ø–∏—Å—á–∏–∫–æ–≤
4. –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Ç–µ–∫—Å—Ç —Ä–∞—Å—Å—ã–ª–∫–∏ —Å–ª–µ–¥—É—é—â–∏–º —Å–æ–æ–±—â–µ–Ω–∏–µ–º
5. –ë–æ—Ç –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Ä–∞—Å—Å—ã–ª–∫—É –Ω–∞ –≤—Å–µ email –ø–æ–¥–ø–∏—Å—á–∏–∫–æ–≤

## üìù –í–∞–∂–Ω—ã–µ –∑–∞–º–µ—á–∞–Ω–∏—è

- –ö–æ–¥ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª–µ–Ω 5 –º–∏–Ω—É—Ç
- Email —É–Ω–∏–∫–∞–ª—å–Ω—ã - –Ω–µ–ª—å–∑—è –ø–æ–¥–ø–∏—Å–∞—Ç—å—Å—è –¥–≤–∞–∂–¥—ã
- –ê–¥–º–∏–Ω –ø–æ–ª—É—á–∞–µ—Ç —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –æ—Ç–ø—Ä–∞–≤–∫–∏ (–æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ/–æ—à–∏–±–æ–∫)
- –í—Å–µ email –æ—Ç–ø—Ä–∞–≤–ª—è—é—Ç—Å—è –æ—Ç `eurocoinfinance@gmail.com`




