# –ü–ª–∞–Ω —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –æ–±–º–µ–Ω–Ω–∏–∫–∞ —Å Telegram-–±–æ—Ç–æ–º

## üìã –û–±–∑–æ—Ä –ø—Ä–æ–µ–∫—Ç–∞

**–¶–µ–ª—å:** –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –ø–æ–ª–Ω–æ—Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π –æ–±–º–µ–Ω–Ω–∏–∫ —Ç–æ–∫–µ–Ω–æ–≤ –≤ —Ñ–∏–∞—Ç —Å –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–µ–π Telegram-–±–æ—Ç–∞ –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∑–∞—è–≤–æ–∫.

**–°—Ç–µ–∫:** Next.js 16, TypeScript, Telegram Bot API (telegraf), Resend –¥–ª—è email, TailwindCSS

**–û–±—â–µ–µ –≤—Ä–µ–º—è:** 3-4 —á–∞—Å–∞

---

## üéØ –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Ä–µ—à–µ–Ω–∏—è

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê     ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê     ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ   Frontend      ‚îÇ‚îÄ‚îÄ‚îÄ‚îÄ‚ñ∂‚îÇ   Backend API    ‚îÇ‚îÄ‚îÄ‚îÄ‚îÄ‚ñ∂‚îÇ  Telegram Bot   ‚îÇ
‚îÇ  (Calculator)   ‚îÇ     ‚îÇ   (Next.js)      ‚îÇ     ‚îÇ  (Notifications)‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò     ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò     ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                                ‚îÇ                          ‚îÇ
                                ‚ñº                          ‚ñº
                         ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê         ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
                         ‚îÇ   Database   ‚îÇ         ‚îÇ  Manager     ‚îÇ
                         ‚îÇ  (optional)  ‚îÇ         ‚îÇ  (Telegram)  ‚îÇ
                         ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò         ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

---

## üìÖ –§–∞–∑–∞ 1: –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ (30 –º–∏–Ω—É—Ç)

### 1.1 –°–æ–∑–¥–∞–Ω–∏–µ Telegram-–±–æ—Ç–∞

1. **–û—Ç–∫—Ä–æ–π—Ç–µ [@BotFather](https://t.me/BotFather) –≤ Telegram**
2. –û—Ç–ø—Ä–∞–≤—å—Ç–µ –∫–æ–º–∞–Ω–¥—É `/newbot`
3. –°–ª–µ–¥—É–π—Ç–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è–º:
   - –£–∫–∞–∂–∏—Ç–µ –∏–º—è –±–æ—Ç–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä: `EuroCoin Exchange Bot`)
   - –£–∫–∞–∂–∏—Ç–µ username (–Ω–∞–ø—Ä–∏–º–µ—Ä: `eurocoin_exchange_bot`)
4. **–°–æ—Ö—Ä–∞–Ω–∏—Ç–µ –ø–æ–ª—É—á–µ–Ω–Ω—ã–π —Ç–æ–∫–µ–Ω** (—Ñ–æ—Ä–º–∞—Ç: `123456789:ABCdefGHIjklMNOpqrsTUVwxyz`)

### 1.2 –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

```bash
npm install telegraf
```

### 1.3 –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è

–î–æ–±–∞–≤—å—Ç–µ –≤ `.env.local`:

```env
# Telegram Bot Configuration
TELEGRAM_API_KEY=your_bot_token_from_botfather
TELEGRAM_MANAGER_CHAT_ID=your_manager_telegram_chat_id

# Exchange Configuration
NEXT_PUBLIC_EXCHANGE_RATE_RUB_PER_TOKEN=150
NEXT_PUBLIC_EXCHANGE_COMMISSION_PERCENT=1.5
NEXT_PUBLIC_AVERAGE_PROCESSING_TIME_MINUTES=15

# Email Configuration (already configured)
RESEND_API_KEY=re_xxxxxxxxxxxxxxxxxxxxx
SENDER_EMAIL=noreply@resend.dev
RECIPIENT_EMAIL=treasury@company.io
```

**–ü—Ä–∏–º–µ—á–∞–Ω–∏—è:**

- `TELEGRAM_MANAGER_CHAT_ID` –º–æ–∂–Ω–æ —É–∑–Ω–∞—Ç—å, –Ω–∞–ø–∏—Å–∞–≤ –±–æ—Ç—É [@userinfobot](https://t.me/userinfobot)
- –î–ª—è –≥—Ä—É–ø–ø—ã –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ `@my_id_bot` –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è group chat ID

---

## üìÖ –§–∞–∑–∞ 2: Backend - Telegram Bot API (1 —á–∞—Å)

### 2.1 –°–æ–∑–¥–∞–Ω–∏–µ API Route –¥–ª—è Telegram Webhook

**–§–∞–π–ª:** `app/api/telegram-webhook/route.ts`

```typescript
import { NextRequest, NextResponse } from "next/server";
import { Telegraf } from "telegraf";

const bot = new Telegraf(process.env.TELEGRAM_BOT_TOKEN!);

// Store for demo (in production, use database)
const exchangeRequests = new Map<string, any>();

bot.start((ctx) => {
  const chatId = ctx.chat.id;
  const username = ctx.chat.first_name || "User";

  ctx.reply(
    `–ü—Ä–∏–≤–µ—Ç, ${username}! üëã\n\n` +
      `–Ø –±–æ—Ç –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∑–∞—è–≤–æ–∫ –Ω–∞ –æ–±–º–µ–Ω —Ç–æ–∫–µ–Ω–æ–≤.\n\n` +
      `–í–∞—à ID: ${chatId}\n\n` +
      `–í—ã –ø–æ–ª—É—á–∏—Ç–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ —Å—Ç–∞—Ç—É—Å–µ –≤–∞—à–∏—Ö –∑–∞—è–≤–æ–∫.`,
  );
});

bot.on("text", (ctx) => {
  ctx.reply("–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∫–Ω–æ–ø–∫–∏ –º–µ–Ω—é –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∑–∞—è–≤–∫–∞–º–∏.");
});

export async function POST(request: NextRequest) {
  try {
    const update = await request.json();
    await bot.handleUpdate(update);
    return NextResponse.json({ ok: true });
  } catch (error) {
    console.error("Error processing Telegram update:", error);
    return NextResponse.json({ error: "Failed to process update" }, { status: 500 });
  }
}

export async function GET(request: NextRequest) {
  return NextResponse.json({ status: "Telegram webhook is active" });
}
```

### 2.2 –°–æ–∑–¥–∞–Ω–∏–µ API Route –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ –∑–∞—è–≤–æ–∫ –Ω–∞ –æ–±–º–µ–Ω

**–§–∞–π–ª:** `app/api/submit-exchange-request/route.ts`

```typescript
import { NextRequest, NextResponse } from "next/server";
import { Telegraf } from "telegraf";
import { Resend } from "resend";

const bot = new Telegraf(process.env.TELEGRAM_BOT_TOKEN!);
const resend = new Resend(process.env.RESEND_API_KEY);

interface ExchangeRequest {
  tokenAmount: string;
  fiatAmount: string;
  walletAddress: string;
  email: string;
  commission: string;
  rate: string;
  comment?: string;
}

export async function POST(request: NextRequest) {
  try {
    const data: ExchangeRequest = await request.json();

    // Validate required fields
    if (!data.tokenAmount || !data.fiatAmount || !data.walletAddress || !data.email) {
      return NextResponse.json({ error: "Missing required fields" }, { status: 400 });
    }

    // Generate request ID
    const requestId = `EX-${Date.now()}`;

    // Prepare message for manager
    const message = `
üîî *–ù–æ–≤–∞—è –∑–∞—è–≤–∫–∞ –Ω–∞ –æ–±–º–µ–Ω —Ç–æ–∫–µ–Ω–æ–≤*

üìã *ID –∑–∞—è–≤–∫–∏:* ${requestId}
üí∞ *–°—É–º–º–∞ —Ç–æ–∫–µ–Ω–æ–≤:* ${data.tokenAmount} TOKEN
üíµ *–°—É–º–º–∞ —Ñ–∏–∞—Ç–∞:* ${data.fiatAmount} RUB
üìä *–ö—É—Ä—Å:* ${data.rate} RUB –∑–∞ 1 TOKEN
üí∏ *–ö–æ–º–∏—Å—Å–∏—è:* ${data.commission}%

üíº *–ê–¥—Ä–µ—Å –∫–æ—à–µ–ª—å–∫–∞:*
\`${data.walletAddress}\`

üìß *Email –∫–ª–∏–µ–Ω—Ç–∞:* ${data.email}
${data.comment ? `üìù *–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π:* ${data.comment}` : ""}

‚è∞ *–í—Ä–µ–º—è:* ${new Date().toLocaleString("ru-RU")}
`;

    // Send to manager in Telegram
    const managerChatId = process.env.TELEGRAM_MANAGER_CHAT_ID;
    if (managerChatId) {
      await bot.telegram.sendMessage(managerChatId, message, { parse_mode: "Markdown" });
    }

    // Send email notification
    const emailHtml = `
      <!DOCTYPE html>
      <html>
        <head>
          <meta charset="UTF-8">
          <style>
            body { font-family: Arial, sans-serif; line-height: 1.6; color: #333; }
            .container { max-width: 600px; margin: 0 auto; padding: 20px; }
            .header { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; padding: 20px; border-radius: 8px 8px 0 0; }
            .content { background: #f9f9f9; padding: 20px; border-radius: 0 0 8px 8px; }
            .field { margin-bottom: 15px; }
            .label { font-weight: bold; color: #667eea; display: block; margin-bottom: 5px; }
            .value { padding: 10px; background: white; border-radius: 4px; border-left: 3px solid #667eea; font-family: monospace; }
          </style>
        </head>
        <body>
          <div class="container">
            <div class="header">
              <h2 style="margin: 0;">üîî –ù–æ–≤–∞—è –∑–∞—è–≤–∫–∞ –Ω–∞ –æ–±–º–µ–Ω —Ç–æ–∫–µ–Ω–æ–≤</h2>
            </div>
            <div class="content">
              <div class="field">
                <span class="label">ID –∑–∞—è–≤–∫–∏:</span>
                <div class="value">${requestId}</div>
              </div>
              <div class="field">
                <span class="label">–°—É–º–º–∞ —Ç–æ–∫–µ–Ω–æ–≤:</span>
                <div class="value">${data.tokenAmount} TOKEN</div>
              </div>
              <div class="field">
                <span class="label">–°—É–º–º–∞ —Ñ–∏–∞—Ç–∞:</span>
                <div class="value">${data.fiatAmount} RUB</div>
              </div>
              <div class="field">
                <span class="label">–ö—É—Ä—Å:</span>
                <div class="value">${data.rate} RUB –∑–∞ 1 TOKEN</div>
              </div>
              <div class="field">
                <span class="label">–ö–æ–º–∏—Å—Å–∏—è:</span>
                <div class="value">${data.commission}</div>
              </div>
              <div class="field">
                <span class="label">–ê–¥—Ä–µ—Å –∫–æ—à–µ–ª—å–∫–∞:</span>
                <div class="value">${data.walletAddress}</div>
              </div>
              <div class="field">
                <span class="label">Email –∫–ª–∏–µ–Ω—Ç–∞:</span>
                <div class="value">${data.email}</div>
              </div>
              ${
                data.comment
                  ? `
              <div class="field">
                <span class="label">–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π:</span>
                <div class="value">${data.comment}</div>
              </div>
              `
                  : ""
              }
              <hr style="border: none; border-top: 1px solid #ddd; margin: 20px 0;">
              <p style="font-size: 12px; color: #666;">
                –í—Ä–µ–º—è: ${new Date().toLocaleString("ru-RU")}
              </p>
            </div>
          </div>
        </body>
      </html>
    `;

    await resend.emails.send({
      from: process.env.SENDER_EMAIL!,
      to: process.env.RECIPIENT_EMAIL!,
      subject: `[EXCHANGE] –ù–æ–≤–∞—è –∑–∞—è–≤–∫–∞ ${requestId}`,
      html: emailHtml,
    });

    return NextResponse.json({ success: true, requestId }, { status: 200 });
  } catch (error) {
    console.error("Error processing exchange request:", error);
    return NextResponse.json({ error: "Internal server error" }, { status: 500 });
  }
}
```

---

## üìÖ –§–∞–∑–∞ 3: Frontend - –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä–∞ (30 –º–∏–Ω—É—Ç)

### 3.1 –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ `ExchangeSection` –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞

**–§–∞–π–ª:** `components/exchange/exchange-section.tsx`

**–ò–∑–º–µ–Ω–µ–Ω–∏—è:**

1. **–î–æ–±–∞–≤—å—Ç–µ state –¥–ª—è —Ñ–æ—Ä–º—ã –∑–∞—è–≤–∫–∏:**

```typescript
const [formData, setFormData] = useState({
  walletAddress: "",
  email: "",
  comment: "",
});
const [isSubmitting, setIsSubmitting] = useState(false);
```

2. **–û–±–Ω–æ–≤–∏—Ç–µ —Ñ—É–Ω–∫—Ü–∏—é `copyTemplate`:**

```typescript
const copyTemplate = () => {
  const template = `–ó–∞—è–≤–∫–∞ –Ω–∞ –æ–±–º–µ–Ω —Ç–æ–∫–µ–Ω–æ–≤:
–°—É–º–º–∞: ${tokenAmount} TOKEN
–ü–æ–ª—É—á–∏—Ç—å: ~${rubAmount} RUB
–ö—É—Ä—Å: 150 RUB –∑–∞ 1 TOKEN
–ö–æ–º–∏—Å—Å–∏—è: 1.5%
–ê–¥—Ä–µ—Å –∫–æ—à–µ–ª—å–∫–∞: ${formData.walletAddress || "–Ω–µ —É–∫–∞–∑–∞–Ω"}
Email: ${formData.email || "–Ω–µ —É–∫–∞–∑–∞–Ω"}`;

  navigator.clipboard.writeText(template).then(() => {
    toast.success("–®–∞–±–ª–æ–Ω —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω!");
  });
};
```

3. **–î–æ–±–∞–≤—å—Ç–µ —Ñ—É–Ω–∫—Ü–∏—é –æ—Ç–ø—Ä–∞–≤–∫–∏ –∑–∞—è–≤–∫–∏:**

```typescript
const handleSubmitRequest = async () => {
  // Validate
  if (!formData.walletAddress || !formData.email) {
    toast.error("–ó–∞–ø–æ–ª–Ω–∏—Ç–µ –≤—Å–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–æ–ª—è!");
    return;
  }

  setIsSubmitting(true);

  try {
    const response = await fetch("/api/submit-exchange-request", {
      method: "POST",
      headers: {
        "Content-Type": "application/json",
      },
      body: JSON.stringify({
        tokenAmount,
        fiatAmount: rubAmount,
        walletAddress: formData.walletAddress,
        email: formData.email,
        comment: formData.comment,
        commission: "1.5%",
        rate: "150 RUB –∑–∞ 1 TOKEN",
      }),
    });

    const data = await response.json();

    if (!response.ok) {
      throw new Error(data.error || "Failed to submit request");
    }

    toast.success("–ó–∞—è–≤–∫–∞ —É—Å–ø–µ—à–Ω–æ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∞ –≤ Telegram!");

    // Reset form
    setFormData({
      walletAddress: "",
      email: "",
      comment: "",
    });
  } catch (error) {
    console.error("Error submitting exchange request:", error);
    toast.error("–û—à–∏–±–∫–∞ –ø—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–µ –∑–∞—è–≤–∫–∏. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –µ—â–µ —Ä–∞–∑.");
  } finally {
    setIsSubmitting(false);
  }
};
```

4. **–î–æ–±–∞–≤—å—Ç–µ –ø–æ–ª—è —Ñ–æ—Ä–º—ã –≤ JSX:**

```typescript
{/* Form Fields */}
<div className="space-y-4">
  {/* Existing token amount input */}

  {/* Wallet Address */}
  <div>
    <label className="mb-2 block text-sm font-medium">
      –ê–¥—Ä–µ—Å –∫–æ—à–µ–ª—å–∫–∞ –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —Ñ–∏–∞—Ç–∞ *
    </label>
    <input
      type="text"
      value={formData.walletAddress}
      onChange={(e) => setFormData({ ...formData, walletAddress: e.target.value })}
      className="w-full rounded-lg border border-outline bg-surface px-4 py-3"
      placeholder="–í–≤–µ–¥–∏—Ç–µ –∞–¥—Ä–µ—Å –∫–æ—à–µ–ª—å–∫–∞"
      required
    />
  </div>

  {/* Email */}
  <div>
    <label className="mb-2 block text-sm font-medium">
      Email –¥–ª—è —Å–≤—è–∑–∏ *
    </label>
    <input
      type="email"
      value={formData.email}
      onChange={(e) => setFormData({ ...formData, email: e.target.value })}
      className="w-full rounded-lg border border-outline bg-surface px-4 py-3"
      placeholder="your@email.com"
      required
    />
  </div>

  {/* Comment (optional) */}
  <div>
    <label className="mb-2 block text-sm font-medium">
      –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π (–Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)
    </label>
    <textarea
      value={formData.comment}
      onChange={(e) => setFormData({ ...formData, comment: e.target.value })}
      className="w-full rounded-lg border border-outline bg-surface px-4 py-3"
      placeholder="–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è"
      rows={3}
    />
  </div>
</div>
```

5. **–û–±–Ω–æ–≤–∏—Ç–µ –∫–Ω–æ–ø–∫—É:**

```typescript
<Button
  onClick={handleSubmitRequest}
  disabled={isSubmitting}
  className="flex-1 bg-accent text-white hover:bg-accent/90"
>
  <svg className="mr-2 h-4 w-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
    <path
      strokeLinecap="round"
      strokeLinejoin="round"
      strokeWidth={2}
      d="M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"
    />
  </svg>
  {isSubmitting ? "–û—Ç–ø—Ä–∞–≤–∫–∞..." : "–°–æ–∑–¥–∞—Ç—å –∑–∞—è–≤–∫—É –≤ Telegram"}
</Button>
```

6. **–î–æ–±–∞–≤—å—Ç–µ –∏–º–ø–æ—Ä—Ç—ã:**

```typescript
import toast from "react-hot-toast";
```

---

## üìÖ –§–∞–∑–∞ 4: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Webhook –¥–ª—è Telegram (15 –º–∏–Ω—É—Ç)

### 4.1 –ü–æ–ª—É—á–µ–Ω–∏–µ Public URL –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏

**–î–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ ngrok:**

1. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ ngrok: `brew install ngrok` (macOS) –∏–ª–∏ —Å–∫–∞—á–∞–π—Ç–µ —Å [ngrok.com](https://ngrok.com)
2. –ó–∞–ø—É—Å—Ç–∏—Ç–µ: `ngrok http 3000`
3. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ HTTPS URL (–Ω–∞–ø—Ä–∏–º–µ—Ä: `https://abc123.ngrok.io`)

### 4.2 –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Webhook

–û—Ç–∫—Ä–æ–π—Ç–µ –≤ –±—Ä–∞—É–∑–µ—Ä–µ:

```
https://api.telegram.org/bot<YOUR_BOT_TOKEN>/setWebhook?url=https://abc123.ngrok.io/api/telegram-webhook
```

**–ò–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ curl:**

```bash
curl -X POST "https://api.telegram.org/bot<YOUR_BOT_TOKEN>/setWebhook?url=https://abc123.ngrok.io/api/telegram-webhook"
```

### 4.3 –ü—Ä–æ–≤–µ—Ä–∫–∞ Webhook

```bash
curl "https://api.telegram.org/bot<YOUR_BOT_TOKEN>/getWebhookInfo"
```

---

## üìÖ –§–∞–∑–∞ 5: –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ (30 –º–∏–Ω—É—Ç)

### 5.1 –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä–∞

1. –ó–∞–ø—É—Å—Ç–∏—Ç–µ dev —Å–µ—Ä–≤–µ—Ä: `npm run dev`
2. –û—Ç–∫—Ä–æ–π—Ç–µ —Å—Ç—Ä–∞–Ω–∏—Ü—É —Å –æ–±–º–µ–Ω–Ω–∏–∫–æ–º
3. –í–≤–µ–¥–∏—Ç–µ —Å—É–º–º—É –≤ —Ç–æ–∫–µ–Ω–∞—Ö
4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ —Å—É–º–º–∞ –≤ RUB –ø–µ—Ä–µ—Å—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è —Å —É—á–µ—Ç–æ–º –∫–æ–º–∏—Å—Å–∏–∏

### 5.2 –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—Ç–ø—Ä–∞–≤–∫–∏ –∑–∞—è–≤–∫–∏

1. –ó–∞–ø–æ–ª–Ω–∏—Ç–µ —Ñ–æ—Ä–º—É –∑–∞—è–≤–∫–∏:
   - –í–≤–µ–¥–∏—Ç–µ —Å—É–º–º—É —Ç–æ–∫–µ–Ω–æ–≤
   - –í–≤–µ–¥–∏—Ç–µ –∞–¥—Ä–µ—Å –∫–æ—à–µ–ª—å–∫–∞
   - –í–≤–µ–¥–∏—Ç–µ email
   - (–û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ) –î–æ–±–∞–≤—å—Ç–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π
2. –ù–∞–∂–º–∏—Ç–µ "–°–æ–∑–¥–∞—Ç—å –∑–∞—è–≤–∫—É –≤ Telegram"
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ:
   - ‚úÖ –ü–æ—è–≤–∏–ª—Å—è toast —Å —É—Å–ø–µ—à–Ω—ã–º —Å–æ–æ–±—â–µ–Ω–∏–µ–º
   - ‚úÖ –§–æ—Ä–º–∞ –æ—á–∏—Å—Ç–∏–ª–∞—Å—å
   - ‚úÖ –í Telegram –º–µ–Ω–µ–¥–∂–µ—Ä—É –ø—Ä–∏—à–ª–æ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ
   - ‚úÖ –ù–∞ email –ø—Ä–∏—à–ª–æ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ

### 5.3 –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –±–æ—Ç–∞

1. –ù–∞–π–¥–∏—Ç–µ –≤–∞—à–µ–≥–æ –±–æ—Ç–∞ –≤ Telegram –ø–æ username
2. –û—Ç–ø—Ä–∞–≤—å—Ç–µ –∫–æ–º–∞–Ω–¥—É `/start`
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –±–æ—Ç –æ—Ç–≤–µ—Ç–∏–ª —Å –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–µ–º

---

## üìÖ –§–∞–∑–∞ 6: –ü—Ä–æ–¥–∞–∫—à–µ–Ω (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

### 6.1 –î–µ–ø–ª–æ–π –Ω–∞ Vercel

```bash
npm run build
vercel --prod
```

### 6.2 –£—Å—Ç–∞–Ω–æ–≤–∫–∞ webhook –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–Ω

```bash
curl -X POST "https://api.telegram.org/bot<YOUR_BOT_TOKEN>/setWebhook?url=https://yourdomain.com/api/telegram-webhook"
```

### 6.3 –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –≤ Vercel Dashboard
- –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –∞–ª–µ—Ä—Ç—ã –¥–ª—è –æ—à–∏–±–æ–∫
- –î–æ–±–∞–≤—å—Ç–µ –∞–Ω–∞–ª–∏—Ç–∏–∫—É (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

---

## ‚úÖ –ß–µ–∫–ª–∏—Å—Ç —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

### Backend

- [ ] –°–æ–∑–¥–∞–Ω Telegram-–±–æ—Ç —á–µ—Ä–µ–∑ BotFather
- [ ] –£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞ –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ `telegraf`
- [ ] –°–æ–∑–¥–∞–Ω API route `/api/telegram-webhook`
- [ ] –°–æ–∑–¥–∞–Ω API route `/api/submit-exchange-request`
- [ ] –ù–∞—Å—Ç—Ä–æ–µ–Ω—ã –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
- [ ] –î–æ–±–∞–≤–ª–µ–Ω–∞ –æ—Ç–ø—Ä–∞–≤–∫–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –≤ Telegram
- [ ] –î–æ–±–∞–≤–ª–µ–Ω–∞ –æ—Ç–ø—Ä–∞–≤–∫–∞ email —á–µ—Ä–µ–∑ Resend

### Frontend

- [ ] –ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä —Ä–∞–±–æ—Ç–∞–µ—Ç –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏
- [ ] –î–æ–±–∞–≤–ª–µ–Ω—ã –ø–æ–ª—è —Ñ–æ—Ä–º—ã (–∞–¥—Ä–µ—Å, email, –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π)
- [ ] –í–∞–ª–∏–¥–∞—Ü–∏—è —Ñ–æ—Ä–º—ã —Ä–∞–±–æ—Ç–∞–µ—Ç
- [ ] –ö–Ω–æ–ø–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏ –∑–∞—è–≤–∫–∏ —Ä–∞–±–æ—Ç–∞–µ—Ç
- [ ] –î–æ–±–∞–≤–ª–µ–Ω—ã toast-—É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
- [ ] –û—á–∏—Å—Ç–∫–∞ —Ñ–æ—Ä–º—ã –ø–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–π –æ—Ç–ø—Ä–∞–≤–∫–∏

### Telegram Bot

- [ ] Webhook –Ω–∞—Å—Ç—Ä–æ–µ–Ω –∏ —Ä–∞–±–æ—Ç–∞–µ—Ç
- [ ] –ë–æ—Ç –æ—Ç–≤–µ—á–∞–µ—Ç –Ω–∞ –∫–æ–º–∞–Ω–¥—É `/start`
- [ ] –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –¥–æ—Å—Ç–∞–≤–ª—è—é—Ç—Å—è –º–µ–Ω–µ–¥–∂–µ—Ä—É
- [ ] –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏–π –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–µ

### –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

- [ ] –ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä —Å—á–∏—Ç–∞–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω–æ
- [ ] –ó–∞—è–≤–∫–∞ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –±–µ–∑ –æ—à–∏–±–æ–∫
- [ ] –ú–µ–Ω–µ–¥–∂–µ—Ä –ø–æ–ª—É—á–∞–µ—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ
- [ ] Email –¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç—Å—è
- [ ] –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç

---

## üîß Troubleshooting

### –ü—Ä–æ–±–ª–µ–º–∞: Webhook –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç

**–†–µ—à–µ–Ω–∏–µ:** –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ URL –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –∏ HTTPS

### –ü—Ä–æ–±–ª–µ–º–∞: –ú–µ–Ω–µ–¥–∂–µ—Ä –Ω–µ –ø–æ–ª—É—á–∞–µ—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è

**–†–µ—à–µ–Ω–∏–µ:** –ü—Ä–æ–≤–µ—Ä—å—Ç–µ `TELEGRAM_MANAGER_CHAT_ID` –≤ `.env.local`

### –ü—Ä–æ–±–ª–µ–º–∞: Email –Ω–µ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è

**–†–µ—à–µ–Ω–∏–µ:** –ü—Ä–æ–≤–µ—Ä—å—Ç–µ `RESEND_API_KEY` –∏ `RECIPIENT_EMAIL`

### –ü—Ä–æ–±–ª–µ–º–∞: –û—à–∏–±–∫–∞ –ø—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–µ –∑–∞—è–≤–∫–∏

**–†–µ—à–µ–Ω–∏–µ:** –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞ –∏ –ª–æ–≥–∏ —Å–µ—Ä–≤–µ—Ä–∞

---

## üìù –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

### –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö

- –î–æ–±–∞–≤—å—Ç–µ PostgreSQL –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –∑–∞—è–≤–æ–∫
- –î–æ–±–∞–≤—å—Ç–µ –∏—Å—Ç–æ—Ä–∏—é –æ–±–º–µ–Ω–æ–≤
- –î–æ–±–∞–≤—å—Ç–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É

### –†–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ –±–æ—Ç–∞

- –î–æ–±–∞–≤—å—Ç–µ –∫–æ–º–∞–Ω–¥—ã –º–µ–Ω–µ–¥–∂–µ—Ä–∞ (`/accept`, `/cancel`, `/complete`)
- –î–æ–±–∞–≤—å—Ç–µ –∏–Ω–ª–∞–π–Ω-–∫–Ω–æ–ø–∫–∏ –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è
- –î–æ–±–∞–≤—å—Ç–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –∫–ª–∏–µ–Ω—Ç—É –æ —Å—Ç–∞—Ç—É—Å–µ –∑–∞—è–≤–∫–∏

### –ê–Ω–∞–ª–∏—Ç–∏–∫–∞

- –î–æ–±–∞–≤—å—Ç–µ –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –∫–æ–Ω–≤–µ—Ä—Å–∏–∏
- –î–æ–±–∞–≤—å—Ç–µ –º–µ—Ç—Ä–∏–∫–∏ –≤—Ä–µ–º–µ–Ω–∏ –æ–±—Ä–∞–±–æ—Ç–∫–∏
- –î–æ–±–∞–≤—å—Ç–µ –æ—Ç—á–µ—Ç—ã

---

**–í—Ä–µ–º—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏:** 3-4 —á–∞—Å–∞  
**–°–ª–æ–∂–Ω–æ—Å—Ç—å:** –°—Ä–µ–¥–Ω—è—è  
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** –í—ã—Å–æ–∫–∏–π
