# –†–µ–∞–ª–∏–∑–∞—Ü–∏—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–∞ —Ä–∞—Å—Å—ã–ª–∫–∏ - –°–≤–æ–¥–∫–∞

## ‚úÖ –í—ã–ø–æ–ª–Ω–µ–Ω–æ

### 1. UI –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–∞ —Ç—Ä–µ—Ç—å—è –∫–Ω–æ–ø–∫–∞ "üìß –†–∞—Å—Å—ã–ª–∫–∞" –≤ —Å–µ–∫—Ü–∏—é "–ö–æ–Ω—Ç–∞–∫—Ç –∏ –Ω–∞—á–∞–ª–æ –ø—Ä–æ—Ü–µ–¥—É—Ä—ã"
- ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω layout –¥–ª—è —Ç—Ä–µ—Ö –∫–Ω–æ–ø–æ–∫ —Å –∞–¥–∞–ø—Ç–∏–≤–Ω–æ—Å—Ç—å—é –¥–ª—è –º–æ–±–∏–ª—å–Ω—ã—Ö
- ‚úÖ –ò–∑–º–µ–Ω–µ–Ω email –¥–ª—è —Å–≤—è–∑–∏ –Ω–∞ `eurocoinfinance@gmail.com`
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω—ã –ø–µ—Ä–µ–≤–æ–¥—ã –¥–ª—è –∫–Ω–æ–ø–∫–∏ —Ä–∞—Å—Å—ã–ª–∫–∏ (RU/EN)

### 2. –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö

- ‚úÖ –°–æ–∑–¥–∞–Ω–∞ —Å—Ö–µ–º–∞ `newsletter-schema.sql` —Å —Ç–∞–±–ª–∏—Ü–∞–º–∏:
  - `newsletter_subscribers` - –ø–æ–¥–ø–∏—Å—á–∏–∫–∏ —Ä–∞—Å—Å—ã–ª–∫–∏
  - `newsletter_campaigns` - –∏—Å—Ç–æ—Ä–∏—è —Ä–∞—Å—Å—ã–ª–æ–∫
  - `newsletter_logs` - –ª–æ–≥–∏ –æ—Ç–ø—Ä–∞–≤–∫–∏
- ‚úÖ –°–æ–∑–¥–∞–Ω—ã –∏–Ω–¥–µ–∫—Å—ã –¥–ª—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –∑–∞–ø—Ä–æ—Å–æ–≤
- ‚úÖ –°–æ–∑–¥–∞–Ω—ã —Ñ—É–Ω–∫—Ü–∏–∏ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –ë–î (`newsletter-queries.ts`)

### 3. API Endpoints

- ‚úÖ –°–æ–∑–¥–∞–Ω `/api/newsletter/send` - endpoint –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ —Ä–∞—Å—Å—ã–ª–∫–∏
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–∞ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è —á–µ—Ä–µ–∑ —Ç–æ–∫–µ–Ω
- ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ –æ—Ç–ø—Ä–∞–≤–∫–∞ —á–µ—Ä–µ–∑ Telegram Bot API
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω rate limiting (50ms –º–µ–∂–¥—É —Å–æ–æ–±—â–µ–Ω–∏—è–º–∏)
- ‚úÖ –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

### 4. Telegram Bot

- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–∞ –∫–æ–º–∞–Ω–¥–∞ `/subscribe` - –ø–æ–¥–ø–∏—Å–∫–∞ –Ω–∞ —Ä–∞—Å—Å—ã–ª–∫—É
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–∞ –∫–æ–º–∞–Ω–¥–∞ `/unsubscribe` - –æ—Ç–ø–∏—Å–∫–∞ –æ—Ç —Ä–∞—Å—Å—ã–ª–∫–∏
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –ø–æ–¥–ø–∏—Å—á–∏–∫–æ–≤ –≤ –ë–î
- ‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —è–∑—ã–∫–æ–≤—ã—Ö –Ω–∞—Å—Ç—Ä–æ–µ–∫

## üìù –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ–∞–π–ª–æ–≤

```
app/
  api/
    newsletter/
      send/
        route.ts              # API –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ —Ä–∞—Å—Å—ã–ª–∫–∏
    telegram-webhook/
      route.ts                # –û–±–Ω–æ–≤–ª–µ–Ω - –¥–æ–±–∞–≤–ª–µ–Ω—ã –∫–æ–º–∞–Ω–¥—ã –ø–æ–¥–ø–∏—Å–∫–∏

components/
  faq/
    faq-section.tsx          # –û–±–Ω–æ–≤–ª–µ–Ω - –¥–æ–±–∞–≤–ª–µ–Ω–∞ –∫–Ω–æ–ø–∫–∞ –†–∞—Å—Å—ã–ª–∫–∞

lib/
  database/
    db.ts                     # –°—É—â–µ—Å—Ç–≤—É—é—â–∏–π - –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è query()
    newsletter-schema.sql    # –°—Ö–µ–º–∞ –ë–î –¥–ª—è —Ä–∞—Å—Å—ã–ª–∫–∏
    newsletter-queries.ts    # –§—É–Ω–∫—Ü–∏–∏ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å —Ä–∞—Å—Å—ã–ª–∫–æ–π

docs/
  newsletter-implementation-plan.md    # –ü–ª–∞–Ω —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏
  newsletter-implementation-summary.md # –≠—Ç–∞ —Å–≤–æ–¥–∫–∞
```

## üîß –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

### Environment Variables

–î–æ–±–∞–≤–∏—Ç—å –≤ `.env.local`:

```bash
# Telegram Bot
TELEGRAM_BOT_TOKEN=your_bot_token
TELEGRAM_API_KEY=your_bot_token
NEWSLETTER_AUTH_TOKEN=your_auth_token_for_sending_newsletters

# Database
DATABASE_URL=your_postgres_connection_string
```

## üöÄ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### –ü–æ–¥–ø–∏—Å–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –º–æ–≥—É—Ç –ø–æ–¥–ø–∏—Å–∞—Ç—å—Å—è –Ω–∞ —Ä–∞—Å—Å—ã–ª–∫—É —á–µ—Ä–µ–∑ Telegram-–±–æ—Ç–∞:

```
/subscribe - –ø–æ–¥–ø–∏—Å–∞—Ç—å—Å—è –Ω–∞ —Ä–∞—Å—Å—ã–ª–∫—É
/unsubscribe - –æ—Ç–ø–∏—Å–∞—Ç—å—Å—è –æ—Ç —Ä–∞—Å—Å—ã–ª–∫–∏
```

### –û—Ç–ø—Ä–∞–≤–∫–∞ —Ä–∞—Å—Å—ã–ª–∫–∏ (–¥–ª—è –∞–¥–º–∏–Ω–∞)

```bash
curl -X POST http://your-app.com/api/newsletter/send \
  -H "Content-Type: application/json" \
  -d '{
    "message": "–í–∞—à–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –∑–¥–µ—Å—å",
    "language": "ru",
    "authToken": "your_auth_token"
  }'
```

### –û—Ç–≤–µ—Ç API

```json
{
  "success": true,
  "total": 150,
  "sent": 145,
  "failed": 5,
  "errors": ["Chat 123456: User blocked the bot", ...]
}
```

## üìä –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏ (–û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

1. **Admin Interface** - —Å–æ–∑–¥–∞—Ç—å —Å—Ç—Ä–∞–Ω–∏—Ü—É –∞–¥–º–∏–Ω–∞ –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è —Ä–∞—Å—Å—ã–ª–æ–∫
2. **Email Newsletter** - –¥–æ–±–∞–≤–∏—Ç—å –æ—Ç–ø—Ä–∞–≤–∫—É —á–µ—Ä–µ–∑ email
3. **Scheduled Newsletters** - –¥–æ–±–∞–≤–∏—Ç—å –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–∞—Å—Å—ã–ª–æ–∫
4. **Analytics** - —Å–±–æ—Ä —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ (–æ—Ç–∫—Ä—ã—Ç–∏—è, –∫–ª–∏–∫–∏)
5. **A/B Testing** - —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–∞–∑–Ω—ã—Ö –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤ —Ä–∞—Å—Å—ã–ª–æ–∫

## üîí –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

- ‚úÖ –¢–æ–∫–µ–Ω –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ —Ä–∞—Å—Å—ã–ª–æ–∫
- ‚úÖ –í–∞–ª–∏–¥–∞—Ü–∏—è –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
- ‚úÖ Rate limiting –¥–ª—è Telegram API
- ‚úÖ –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö –æ–ø–µ—Ä–∞—Ü–∏–π
- ‚úÖ –ó–∞—â–∏—Ç–∞ –æ—Ç —Å–ø–∞–º–∞ (–æ–¥–∏–Ω chat_id - –æ–¥–Ω–∞ –ø–æ–¥–ø–∏—Å–∫–∞)

## üìà –ú–µ—Ç—Ä–∏–∫–∏

–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Ä–∞—Å—Å—ã–ª–æ–∫:

- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∞–∫—Ç–∏–≤–Ω—ã—Ö –ø–æ–¥–ø–∏—Å—á–∏–∫–æ–≤
- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã—Ö/–¥–æ—Å—Ç–∞–≤–ª–µ–Ω–Ω—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π
- –ò—Å—Ç–æ—Ä–∏—è –æ—à–∏–±–æ–∫ –æ—Ç–ø—Ä–∞–≤–∫–∏
- –ü—Ä–æ—Ü–µ–Ω—Ç —É—Å–ø–µ—à–Ω—ã—Ö –¥–æ—Å—Ç–∞–≤–æ–∫




